import{q as d,a0 as j,u as z,I as O,g as q,h as G,s as N,aa as x,R as A,l as p,K as S,a8 as H,_ as K,d as b,b as u,w as M,r as h,o as C,a as n,L as U,e as E}from"../index25247.js";const P={setup(){const k=d({icon:"pi pi-home",to:"/team"}),o=d(""),c=d([{label:""}]),e=j(),i=z(),_=O(),a=d({}),g=[{name:"Admin",value:"admin"},{name:"User",value:"user"},{name:"Backoffice",value:"backoffice"}],f=[{name:"Abilitato",value:!0},{name:"Non abilitato",value:!1}],m=d(!1),v=d(!1),s=d(!1),V=d(!1),r=q(()=>i.getters[H.CURRENT_USER]),B=async function(){try{const l=await i.dispatch(x.FETCH_USER_DETAIL,e.params.id+"");return c.value[0]={label:r.value.full_name+""},I(),l}catch(l){p(i),S(_,l)}},D=async function(){if(y()||w()||T()||R())return;N(i);const l={user:a.value};try{const t=await i.dispatch(x.UPDATE_USER,l);return A(_,{message:"Utente aggiornato correttamente.",title:""}),c.value[0]={label:r.value.full_name+""},p(i),t}catch(t){p(i),S(_,t)}},L=async function(){if(y()||w()||T()||R())return;N(i);const l={user:a.value};try{const t=await i.dispatch(x.CREATE_USER,l);return A(_,{message:"Utente creato correttamente.",title:""}),c.value[0]={label:r.value.full_name+""},p(i),t}catch(t){p(i),S(_,t)}},I=function(){a.value.id=r.value.id,a.value.first_name=r.value.first_name,a.value.last_name=r.value.last_name,a.value.email=r.value.email,a.value.role=r.value.role,a.value.enabled=r.value.enabled},F=function(){o.value!=""&&a.value.id?D():L()},y=function(){var l,t;return((l=a.value)==null?void 0:l.last_name)==""||((t=a.value)==null?void 0:t.last_name)==null?v.value=!0:v.value=!1,v.value},w=function(){var l,t;return((l=a.value)==null?void 0:l.first_name)==""||((t=a.value)==null?void 0:t.first_name)==null?m.value=!0:m.value=!1,m.value},T=function(){var l,t;return((l=a.value)==null?void 0:l.email)==""||((t=a.value)==null?void 0:t.email)==null?V.value=!0:V.value=!1,V.value},R=function(){var l,t;return((l=a.value)==null?void 0:l.role)==""||((t=a.value)==null?void 0:t.role)==null?s.value=!0:s.value=!1,s.value};return G(async()=>{o.value=e.params.id+"",o.value!=""?B():c.value[0]={label:"Nuovo utente"}}),{user_detail:r,home:k,items:c,roles:g,statuses:f,tmp_user:a,invalid_first_name:m,invalid_last_name:v,invalid_role:s,invalid_email:V,saveUser:F,validateLastName:y,validateFirstName:w,validateEmail:T,validateRole:R}}};const J={class:"m-4"},Q={class:"flex align-items-center justify-content-between"},W=n("h1",null,"DATI ACCESSO TEAM",-1),X={class:"formgrid grid col-6"},Y={class:"field col-6"},Z=n("label",{for:"last_name"},"Cognome*",-1),$={key:0,id:"last_name",class:"p-error"},ee={class:"field col-6"},ae=n("label",{for:"first_name"},"Nome*",-1),le={key:0,id:"first_name",class:"p-error"},te={class:"field col-6"},oe=n("label",{for:"email"},"Email*",-1),se={key:0,id:"email",class:"p-error"},ne={class:"field col-6"},ie=n("label",{for:"role"},"Ruolo*",-1),re={key:0,id:"role",class:"p-error"},ue={class:"field col-6"},de=n("label",{for:"role"},"Stato",-1),me={class:"flex justify-content-end"};function ce(k,o,c,e,i,_){const a=h("Breadcrumb"),g=h("Button"),f=h("InputText"),m=h("Dropdown"),v=h("Card");return C(),b("div",J,[u(a,{home:e.home,model:e.items},null,8,["home","model"]),u(v,null,{content:M(()=>[n("div",Q,[W,u(g,{label:"Invia credenziali",class:"p-button-outlined",disabled:""})]),n("div",X,[n("div",Y,[Z,u(f,{id:"last_name",type:"text",modelValue:e.tmp_user.last_name,"onUpdate:modelValue":o[0]||(o[0]=s=>e.tmp_user.last_name=s),class:U(["w-full",{"p-invalid":e.invalid_last_name}]),onChange:e.validateLastName},null,8,["modelValue","class","onChange"]),e.invalid_last_name?(C(),b("small",$,"Campo obbligatorio.")):E("",!0)]),n("div",ee,[ae,u(f,{id:"first_name",type:"text",modelValue:e.tmp_user.first_name,"onUpdate:modelValue":o[1]||(o[1]=s=>e.tmp_user.first_name=s),class:U(["w-full",{"p-invalid":e.invalid_first_name}]),onChange:e.validateFirstName},null,8,["modelValue","class","onChange"]),e.invalid_first_name?(C(),b("small",le,"Campo obbligatorio.")):E("",!0)]),n("div",te,[oe,u(f,{id:"email",type:"text",modelValue:e.tmp_user.email,"onUpdate:modelValue":o[2]||(o[2]=s=>e.tmp_user.email=s),class:U(["w-full",{"p-invalid":e.invalid_email}]),onChange:e.validateEmail},null,8,["modelValue","class","onChange"]),e.invalid_email?(C(),b("small",se,"Campo obbligatorio.")):E("",!0)]),n("div",ne,[ie,u(m,{modelValue:e.tmp_user.role,"onUpdate:modelValue":o[3]||(o[3]=s=>e.tmp_user.role=s),options:e.roles,optionLabel:"name",optionValue:"value",id:"role",class:U(["w-full",{"p-invalid":e.invalid_role}]),onChange:e.validateRole},null,8,["modelValue","options","class","onChange"]),e.invalid_role?(C(),b("small",re,"Campo obbligatorio.")):E("",!0)]),n("div",ue,[de,u(m,{modelValue:e.tmp_user.enabled,"onUpdate:modelValue":o[4]||(o[4]=s=>e.tmp_user.enabled=s),options:e.statuses,optionLabel:"name",optionValue:"value",id:"role",class:"w-full"},null,8,["modelValue","options"])])]),n("div",me,[u(g,{label:"Salva utente",onClick:e.saveUser},null,8,["onClick"])])]),_:1})])}const ve=K(P,[["render",ce]]);export{ve as default};
