import{g as f,u as x,q as v,x as U,i as g,a9 as y,_ as R,d as h,a as t,b as s,w as u,r as l,o as p,m,t as a,f as I,a0 as A,s as k,a7 as O,l as D,U as $,V as q,h as N,c as P,e as E,I as Y,K as H}from"../index25247.js";import{a as j,C as L}from"./CardProductRequestAgenda25247.js";import"./AppointmentCalendar25247.js";const M={props:{initProductRequest:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})}},setup(n,{emit:o}){const d=f(()=>JSON.parse(JSON.stringify(r.getters[y.CURRENT_CONTACT]))),e=f({get:()=>n.modelValue,set:c=>o("update:modelValue",c)}),r=x(),i=v(!1),_=v(n.initProductRequest);return U(_,c=>{_.value=Object.assign({},c)}),{contact_detail:d,moment:g,new_product_request:e,invalid_amount:i}},components:{CardProductRequestAgenda:j}};const G={class:"general-user"},F={class:"flex flex-wrap"},B={class:"col-4"},z=t("h2",{class:"mt-0 mb-3"},"NOTE",-1),W={class:"field"},J=t("div",{class:"col-8"},null,-1),Q={class:"col-12 mt-4"},K=t("h2",{class:"mt-0 mb-3"},"ANAGRAFICA",-1),X={class:"col-12 flex p-0"},Z={class:"col-3 text-900 pl-0 mb-2"},tt=t("p",{class:"m-0 mb-1 text-500"},"Cognome",-1),et={class:"col-3 text-900 pl-0 mb-2"},st=t("p",{class:"m-0 mb-1 text-500"},"Nome",-1),ot={class:"col-3 text-900 pl-0 mb-2"},ct=t("p",{class:"m-0 mb-1 text-500"},"Data di nascita",-1),at={key:0},nt={key:1},_t={class:"col-3 text-900 pl-0 mb-2"},lt=t("p",{class:"m-0 mb-1 text-500"},"Luogo di nascita",-1),dt={class:"col-12 flex p-0"},rt={class:"col-3 text-900 pl-0 mb-2"},it=t("p",{class:"m-0 mb-1 text-500"},"Telefono",-1),mt={class:"col-3 text-900 pl-0 mb-2"},ut=t("p",{class:"m-0 mb-1 text-500"},"Email",-1),pt={class:"col-3 text-900 pl-0 mb-2"},ht=t("p",{class:"m-0 mb-1 text-500"},"Telefono 2",-1),bt={class:"col-3 text-900 pl-0 mb-2"},Tt=t("p",{class:"m-0 mb-1 text-500"},"Telefono 3",-1),ft={class:"col-12 flex p-0"},Ct={class:"col-3 text-900 pl-0 mb-2"},vt=t("p",{class:"m-0 mb-1 text-500"},"Codice fiscale",-1),xt={class:"col-3 text-900 pl-0 mb-2"},yt=t("p",{class:"m-0 mb-1 text-500"},"Indirizzo",-1),Rt={class:"col-3 text-900 pl-0 mb-2"},gt=t("p",{class:"m-0 mb-1 text-500"},"Citt\xE0",-1),At={class:"col-3 text-900 pl-0 mb-2"},Ot=t("p",{class:"m-0 mb-1 text-500"},"Provincia",-1);function Dt(n,o,d,e,r,i){const _=l("Textarea"),c=l("Card");return p(),h("div",G,[t("div",F,[t("div",B,[s(c,{class:"h-full mt-3"},{content:u(()=>[z,t("div",W,[s(_,{class:"w-full",id:"note",rows:"5",cols:"30",modelValue:e.contact_detail.note,"onUpdate:modelValue":o[0]||(o[0]=b=>e.contact_detail.note=b),disabled:""},null,8,["modelValue"])])]),_:1})]),J]),t("div",Q,[s(c,null,{content:u(()=>[K,t("div",X,[t("div",Z,[tt,m(" "+a(e.contact_detail.last_name||"-"),1)]),t("div",et,[st,m(" "+a(e.contact_detail.first_name||"-"),1)]),t("div",ot,[ct,e.contact_detail.birthday?(p(),h("span",at,a(e.moment(e.contact_detail.birthday).format("DD/MM/YYYY")),1)):(p(),h("span",nt,"-"))]),t("div",_t,[lt,m(" "+a(e.contact_detail.birth_city||"-"),1)])]),t("div",dt,[t("div",rt,[it,m(" "+a(e.contact_detail.phone||"-"),1)]),t("div",mt,[ut,m(" "+a(e.contact_detail.email||"-"),1)]),t("div",pt,[ht,m(" "+a(e.contact_detail.phone_2||"-"),1)]),t("div",bt,[Tt,m(" "+a(e.contact_detail.phone_3||"-"),1)])]),t("div",ft,[t("div",Ct,[vt,m(" "+a(e.contact_detail.fiscal_code||"-"),1)]),t("div",xt,[yt,m(" "+a(e.contact_detail.address||"-"),1)]),t("div",Rt,[gt,m(" "+a(e.contact_detail.city||"-"),1)]),t("div",At,[Ot,m(" "+a(e.contact_detail.province||"-"),1)])])]),_:1})])])}const Nt=R(M,[["render",Dt]]),Ut={props:{initProductRequest:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})}},setup(n,{emit:o}){const d=f(()=>r.getters[y.CURRENT_CONTACT]),e=f({get:()=>n.modelValue,set:c=>o("update:modelValue",c)}),r=x(),i=v(!1),_=v(n.initProductRequest);return U(_,c=>{_.value=Object.assign({},c)}),{contact_detail:d,moment:g,new_product_request:e,invalid_amount:i}},components:{}};const $t={class:"general-user"},qt={class:"col-12 mt-4"},Pt=t("h2",{class:"mt-0 mb-3"},"DATI DI LAVORO",-1),Et={class:"col-12 flex p-0"},Vt={class:"col-3 text-900 pl-0 mb-2"},St=t("p",{class:"m-0 mb-1 text-500"},"Azienda",-1),wt={key:0},It={key:1},kt={class:"col-12 flex p-0"},Yt={class:"col-3 text-900 pl-0 mb-2"},Ht=t("p",{class:"m-0 mb-1 text-500"},"Tipo di lavoro",-1),jt={class:"col-3 text-900 pl-0 mb-2"},Lt=t("p",{class:"m-0 mb-1 text-500"},"P.IVA",-1),Mt={class:"col-3 text-900 pl-0 mb-2"},Gt=t("p",{class:"m-0 mb-1 text-500"},"Data assunzione",-1),Ft={key:0},Bt={key:1},zt={class:"col-3 text-900 pl-0 mb-2"},Wt=t("p",{class:"m-0 mb-1 text-500"},"Tipo di contratto",-1),Jt={class:"col-12 flex p-0"},Qt={class:"col-3 text-900 pl-0 mb-2"},Kt=t("p",{class:"m-0 mb-1 text-500"},"Note",-1);function Xt(n,o,d,e,r,i){const _=l("Card");return p(),h("div",$t,[t("div",qt,[s(_,null,{content:u(()=>[Pt,t("div",Et,[t("div",Vt,[St,e.contact_detail.company?(p(),h("span",wt,a(e.contact_detail.company.name),1)):(p(),h("span",It,"-"))])]),t("div",kt,[t("div",Yt,[Ht,m(" "+a(e.contact_detail.job_type||"-"),1)]),t("div",jt,[Lt,m(" "+a(e.contact_detail.vat||"-"),1)]),t("div",Mt,[Gt,e.contact_detail.job_start_date?(p(),h("span",Ft,a(e.moment(e.contact_detail.job_start_date).format("DD/MM/YYYY")),1)):(p(),h("span",Bt,"-"))]),t("div",zt,[Wt,m(" "+a(e.contact_detail.contract_type||"-"),1)])]),t("div",Jt,[t("div",Qt,[Kt,m(" "+a(e.contact_detail.job_note||"-"),1)])])]),_:1})])])}const Zt=R(Ut,[["render",Xt]]),te={setup(){I(()=>{e(d.params.id+"")});const n=f(()=>o.getters[y.CURRENT_CONTACT_HISTORY]),o=x(),d=A(),e=async function(r){k(o);try{const i=await o.dispatch(O.FETCH_CONTACT_HISTORY,r);return n.value,D(o),i}catch{D(o)}};return{contact_history:n,moment:g}},components:{}};const ee={class:"general-user"},se={class:"col-12 mt-4"},oe=t("h2",{class:"mt-0 mb-3"},"STORICO ANAGRAFICA",-1),ce={class:"col-12 p-0"},ae={class:"list-none"};function ne(n,o,d,e,r,i){const _=l("Column"),c=l("DataTable"),b=l("Card");return p(),h("div",ee,[t("div",se,[s(b,null,{content:u(()=>[oe,t("div",ce,[s(c,{value:e.contact_history,responsiveLayout:"scroll"},{default:u(()=>[s(_,{field:"data",header:"Data"},{body:u(({data:C})=>[m(a(e.moment.unix(C.created_at).format("DD/MM/YYYY")),1)]),_:1}),s(_,{field:"event_type_string",header:"Operatore"}),s(_,{field:"pretty_changes",header:"Modifiche"},{body:u(({data:C})=>[t("ul",ae,[(p(!0),h($,null,q(C.pretty_changes,T=>(p(),h("li",{key:T},a(T),1))),128))])]),_:1})]),_:1},8,["value"])])]),_:1})])])}const _e=R(te,[["render",ne]]),le={setup(){const n=A(),o=x(),d=f(()=>o.getters[y.CURRENT_CONTACT_PRODUCT]),e=async function(){try{const r=await o.dispatch(O.FETCH_CONTACT_PRODUCTS,n.params.id+"");return d.value,r}catch{}};return N(async()=>{e()}),{contact_products:d}},components:{CardSingleProduct:L}},de=t("h2",null,"PRODOTTI",-1),re={class:"flex column-gap-2 row-gap-4 flex-wrap mt-4"},ie={key:0},me=t("label",null,"Nessun prodotto esistente",-1),ue=[me];function pe(n,o,d,e,r,i){const _=l("CardSingleProduct"),c=l("Card");return p(),P(c,{class:"mt-3"},{content:u(()=>[de,t("div",re,[(p(!0),h($,null,q(e.contact_products,b=>(p(),h("div",{key:b.id,class:"col-3"},[s(_,{product:b,icon_delete:!1},null,8,["product"])]))),128))]),e.contact_products==null||e.contact_products.length==0?(p(),h("div",ie,ue)):E("",!0)]),_:1})}const he=R(le,[["render",pe]]),be={setup(){const n=f(()=>o.getters[y.CURRENT_CONTACT_REQUEST]),o=x(),d=A(),e=v({number:"",product_request_status_histories:[]}),r=async function(){try{const i=await o.dispatch(O.FETCH_CONTACT_REQUEST,d.params.id+"");return n.value,i}catch{}};return N(async()=>{r()}),{moment:g,contact_requests:n,current_request_selected:e}}},Te={class:"field mb-0 flex flex-column col-2"},fe=t("h2",{class:"mb-3"},"STATI PRATICHE",-1),Ce=t("label",{for:"request_type"},"Nome pratica",-1);function ve(n,o,d,e,r,i){const _=l("Dropdown"),c=l("Column"),b=l("DataTable"),C=l("Card");return p(),h("div",null,[s(C,null,{content:u(()=>[t("div",Te,[fe,Ce,s(_,{modelValue:e.current_request_selected,"onUpdate:modelValue":o[0]||(o[0]=T=>e.current_request_selected=T),options:e.contact_requests,optionLabel:"number",id:"request_type",class:"dropdown"},null,8,["modelValue","options"])]),e.current_request_selected.product_request_status_histories.length>0?(p(),P(b,{key:0,value:e.current_request_selected.product_request_status_histories,responsiveLayout:"scroll"},{default:u(()=>[s(c,{header:"Codice pratica"},{body:u(()=>[m(a(e.current_request_selected.number),1)]),_:1}),s(c,{field:"name",header:"Tipo pratica"}),s(c,{field:"category",header:"Data e ora"},{body:u(({data:T})=>[m(a(e.moment.unix(T.created_at).format("DD/MM/YYYY - HH:mm")),1)]),_:1}),s(c,{field:"request_status_name",header:"Stato"}),s(c,{field:"note",header:"Testo"}),s(c,{field:"created_by_full_name",header:"Operatore"})]),_:1},8,["value"])):E("",!0)]),_:1})])}const xe=R(be,[["render",ve]]),ye={setup(){const n=v({icon:"pi pi-home",to:"/archivio-utenti"}),o=v([{label:""}]),d=A(),e=x(),r=Y(),i=f(()=>e.getters[y.CURRENT_CONTACT]),_=async function(){try{const c=await e.dispatch(O.FETCH_CONTACT_DETAIL,d.params.id+"");return o.value[0]={label:i.value.full_name+""},c}catch(c){D(e),H(r,c)}};return N(async()=>{d.params.id!=""&&_()}),{contact_detail:i,home:n,items:o}},components:{TabGeneralUser:Nt,TabWorkDataUser:Zt,TabUserRegistryHistory:_e,TabProductUser:he,TabProductRequestStatusUser:xe}};const Re={class:"m-4"},ge={class:"flex justify-content-between align-items-center"};function Ae(n,o,d,e,r,i){const _=l("Breadcrumb"),c=l("TabGeneralUser"),b=l("TabPanel"),C=l("TabWorkDataUser"),T=l("TabProductUser"),V=l("TabProductRequestStatusUser"),S=l("TabUserRegistryHistory"),w=l("TabView");return p(),h("div",Re,[t("div",ge,[s(_,{home:e.home,model:e.items},null,8,["home","model"])]),s(w,{class:"mt-2 p-0"},{default:u(()=>[s(b,{header:"GENERALI"},{default:u(()=>[s(c)]),_:1}),s(b,{header:"DATI LAVORO"},{default:u(()=>[s(C)]),_:1}),s(b,{header:"PRODOTTI"},{default:u(()=>[s(T)]),_:1}),s(b,{header:"STATI PRATICHE"},{default:u(()=>[s(V)]),_:1}),s(b,{header:"STORICO ANAGRAFICA"},{default:u(()=>[s(S)]),_:1})]),_:1})])}const Ue=R(ye,[["render",Ae]]);export{Ue as default};
