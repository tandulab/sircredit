import{q as f,a0 as U,u as E,I as R,g as I,x as O,h as z,s as A,a1 as v,l as _,R as x,K as h,a2 as P,_ as k,d as T,a,b as n,w as V,e as N,r as u,o as g,L as B}from"../index83433.js";const D={setup(){const C=f({icon:"pi pi-home",to:"/anagrafica-aziende"}),l=f([{label:"Nuova azienda"}]),p=U(),e=E(),i=R(),d=f(),c=f(!1),y=I(()=>e.getters[P.CURRENT_COMPANY]),s=async function(){try{return await e.dispatch(v.FETCH_COMPANY_DETAIL,p.params.id+"")}catch(t){_(e),h(i,t)}},m=function(){d.value&&d.value.id?w():o()},w=async function(){if(b())return;A(e);let t={company:d.value};await e.dispatch(v.UPDATE_COMPANY,t).then(()=>{_(e),x(i,{message:"Azienda salvata correttamente.",title:""})}).catch(r=>{_(e),h(i,r)})},o=async function(){if(b())return;A(e);let t={company:d.value};await e.dispatch(v.CREATE_COMPANY,t).then(()=>{_(e),x(i,{message:"Azienda creata correttamente.",title:""})}).catch(r=>{_(e),h(i,r)})},b=function(){var t,r;return((t=d.value)==null?void 0:t.name)==""||((r=d.value)==null?void 0:r.name)==null?c.value=!0:c.value=!1,c.value};return O(y,t=>{d.value=Object.assign({},t),t!=null&&t!="undefined undefined"?l.value[0]={label:t.name+""}:l.value[0]={label:"Nuova azienda"}}),z(async()=>{p.params.id!=""?s():d.value={}}),{new_company_detail:d,home:C,items:l,invalid_name:c,saveCompany:m,validateName:b}}},M={key:0,class:"m-4"},Y={class:"flex justify-content-between align-items-center"},L=a("h2",{class:"mt-0 mb-3"},"ANAGRAFICA AZIENDA",-1),S={class:"formgrid grid"},q={class:"field col-6"},j=a("label",{for:"name"},"Ragione sociale*",-1),F={key:0,id:"name",class:"p-error"},G={class:"field col-6"},Z=a("label",{for:"vat"},"P.IVA",-1),H=a("h2",{class:"mt-0 mb-3"},"CONTATTI AZIENDA",-1),K={class:"formgrid grid"},J={class:"field col-6"},Q=a("label",{for:"email"},"Email",-1),W={class:"field col-6"},X=a("label",{for:"pec"},"PEC",-1),$={class:"field col-6"},ee=a("label",{for:"referral_user"},"Referente",-1),ae={class:"field col-6"},le=a("label",{for:"phone"},"Telefono",-1),oe={class:"field col-12"},ne=a("label",{for:"address"},"Indirizzo notifica",-1),te=a("h2",{class:"mt-0 mb-3"},"ALTRO",-1),se={class:"formgrid grid"},de={class:"field col-6"},ie=a("label",{for:"release"},"Rilascio",-1),ce={class:"field col-6"},re=a("label",{for:"release_time"},"Tempistiche",-1),me={class:"field col-6"},_e=a("label",{for:"ab"},"AB",-1),ue={class:"field col-6"},fe=a("label",{for:"renew"},"Rinnovo",-1),pe={class:"field col-12"},ye=a("label",{for:"notes"},"Note",-1);function we(C,l,p,e,i,d){const c=u("Breadcrumb"),y=u("Button"),s=u("InputText"),m=u("Card"),w=u("Textarea");return e.new_company_detail?(g(),T("div",M,[a("div",Y,[n(c,{home:e.home,model:e.items},null,8,["home","model"]),n(y,{label:"Salva azienda",class:"mb-3",onClick:e.saveCompany},null,8,["onClick"])]),n(m,null,{content:V(()=>[L,a("div",S,[a("div",q,[j,n(s,{class:B(["w-full",{"p-invalid":e.invalid_name}]),id:"name",type:"text",modelValue:e.new_company_detail.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.new_company_detail.name=o),"aria-describedby":"name",onChange:e.validateName},null,8,["modelValue","class","onChange"]),e.invalid_name?(g(),T("small",F,"Campo obbligatorio.")):N("",!0)]),a("div",G,[Z,n(s,{class:"w-full",id:"vat",type:"text",modelValue:e.new_company_detail.vat,"onUpdate:modelValue":l[1]||(l[1]=o=>e.new_company_detail.vat=o),"aria-describedby":"vat"},null,8,["modelValue"])])])]),_:1}),n(m,{class:"my-4"},{content:V(()=>[H,a("div",K,[a("div",J,[Q,n(s,{class:"w-full",id:"email",type:"text",modelValue:e.new_company_detail.email,"onUpdate:modelValue":l[2]||(l[2]=o=>e.new_company_detail.email=o),"aria-describedby":"email"},null,8,["modelValue"])]),a("div",W,[X,n(s,{class:"w-full",id:"pec",type:"text",modelValue:e.new_company_detail.pec,"onUpdate:modelValue":l[3]||(l[3]=o=>e.new_company_detail.pec=o),"aria-describedby":"pec"},null,8,["modelValue"])]),a("div",$,[ee,n(s,{class:"w-full",id:"referral_user",type:"text",modelValue:e.new_company_detail.referral_user,"onUpdate:modelValue":l[4]||(l[4]=o=>e.new_company_detail.referral_user=o),"aria-describedby":"referral_user"},null,8,["modelValue"])]),a("div",ae,[le,n(s,{class:"w-full",id:"phone",type:"text",modelValue:e.new_company_detail.phone,"onUpdate:modelValue":l[5]||(l[5]=o=>e.new_company_detail.phone=o),"aria-describedby":"phone"},null,8,["modelValue"])]),a("div",oe,[ne,n(s,{class:"w-full",id:"address",type:"text",modelValue:e.new_company_detail.address,"onUpdate:modelValue":l[6]||(l[6]=o=>e.new_company_detail.address=o),"aria-describedby":"address"},null,8,["modelValue"])])])]),_:1}),n(m,null,{content:V(()=>[te,a("div",se,[a("div",de,[ie,n(s,{class:"w-full",id:"release",type:"text",modelValue:e.new_company_detail.release,"onUpdate:modelValue":l[7]||(l[7]=o=>e.new_company_detail.release=o),"aria-describedby":"release"},null,8,["modelValue"])]),a("div",ce,[re,n(s,{class:"w-full",id:"release_time",type:"text",modelValue:e.new_company_detail.release_time,"onUpdate:modelValue":l[8]||(l[8]=o=>e.new_company_detail.release_time=o),"aria-describedby":"release_time"},null,8,["modelValue"])]),a("div",me,[_e,n(s,{class:"w-full",id:"ab",type:"text",modelValue:e.new_company_detail.ab,"onUpdate:modelValue":l[9]||(l[9]=o=>e.new_company_detail.ab=o),"aria-describedby":"ab"},null,8,["modelValue"])]),a("div",ue,[fe,n(s,{class:"w-full",id:"renew",type:"text",modelValue:e.new_company_detail.renew,"onUpdate:modelValue":l[10]||(l[10]=o=>e.new_company_detail.renew=o),"aria-describedby":"renew"},null,8,["modelValue"])]),a("div",pe,[ye,n(w,{class:"w-full",id:"note",rows:"5",cols:"30",modelValue:e.new_company_detail.notes,"onUpdate:modelValue":l[11]||(l[11]=o=>e.new_company_detail.notes=o)},null,8,["modelValue"])])])]),_:1})])):N("",!0)}const ve=k(D,[["render",we]]);export{ve as default};
